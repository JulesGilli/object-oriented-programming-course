# 2. Attributs et Méthodes

## Objectif

Comprendre le rôle des **attributs** et des **méthodes** dans une classe, leur portée, et comment ils définissent l’état et le comportement d’un objet.

---

## Définition et explication

Une classe se compose généralement de deux éléments fondamentaux :

* **Les attributs** (ou *champs*) : ils décrivent les **données internes** d’un objet, c’est-à-dire son **état**.
* **Les méthodes** : elles définissent les **actions** ou **comportements** que l’objet peut exécuter.

Les **attributs** sont comparables à des variables propres à chaque instance de la classe.
Chaque objet possède ses propres copies de ces valeurs, indépendantes des autres objets du même type.

Les **méthodes**, quant à elles, sont des fonctions définies à l’intérieur de la classe. Elles peuvent manipuler les attributs ou exécuter une logique spécifique à cet objet.
Une méthode peut également retourner une valeur, recevoir des paramètres, ou modifier l’état de l’objet.

---

### Membres d’instance et de classe

En C#, on distingue deux types de membres :

* **Membres d’instance** : chaque objet possède sa propre version (ex. : `voiture1.Couleur` ≠ `voiture2.Couleur`).
* **Membres de classe (statique)** : partagés entre toutes les instances, déclarés avec le mot-clé `static`.

Un membre `static` appartient à la classe elle-même, et non à un objet particulier.

Exemple : un compteur statique pour suivre le nombre d’instances créées.

```csharp
public class Voiture
{
    public string Marque;           // Attribut d’instance
    public static int NombreTotal;  // Attribut de classe

    public Voiture(string marque)
    {
        Marque = marque;
        NombreTotal++; // Incrémente pour chaque nouvelle voiture
    }

    public void Demarrer()
    {
        Console.WriteLine($"{Marque} démarre.");
    }
}
```

Ici, chaque `Voiture` possède sa propre `Marque`, mais toutes partagent la même variable `NombreTotal`.

---

### Portée et visibilité des membres

Les attributs et méthodes d’une classe peuvent avoir différents **modificateurs d’accès**, qui déterminent leur visibilité depuis d’autres parties du code.

| Modificateur         | Portée                                               | Description                                          |
| -------------------- | ---------------------------------------------------- | ---------------------------------------------------- |
| `public`             | Accessible partout                                   | Utilisé pour exposer des membres depuis l’extérieur. |
| `private`            | Accessible uniquement à l’intérieur de la classe     | Protège les données internes.                        |
| `protected`          | Accessible dans la classe et ses dérivées            | Utilisé pour l’héritage.                             |
| `internal`           | Accessible dans le même assembly (projet)            | Souvent utilisé dans les bibliothèques internes.     |
| `protected internal` | Accessible dans le même assembly ou classes dérivées | Combinaison des deux précédents.                     |

Bonnes pratiques :

* Rendre les attributs **privés** par défaut et utiliser des **propriétés** (`get` / `set`) pour y accéder.
* Rendre publiques uniquement les méthodes nécessaires à l’extérieur.
* Éviter d’exposer directement les champs publics pour préserver l’intégrité de l’objet.

---

### Différence entre attribut et méthode

| Élément      | Rôle                               | Exemple                                    |
| ------------ | ---------------------------------- | ------------------------------------------ |
| **Attribut** | Donnée, caractéristique de l’objet | `vitesse`, `couleur`, `pointsDeVie`        |
| **Méthode**  | Action ou comportement de l’objet  | `Accélérer()`, `Freiner()`, `SubirDegat()` |

Les deux sont complémentaires : les attributs décrivent **ce que l’objet est**, les méthodes définissent **ce que l’objet fait**.

---

## Exemple minimal en C#

```csharp
public class Joueur
{
    private int pointsDeVie;   // Attribut privé
    public string Nom;         // Attribut public

    public void Attaquer()
    {
        Console.WriteLine($"{Nom} attaque !");
    }

    public void SubirDegats(int degats)
    {
        pointsDeVie -= degats;
        Console.WriteLine($"{Nom} a {pointsDeVie} points de vie restants.");
    }
}
```

Dans cet exemple :

* `Nom` et `pointsDeVie` sont des **attributs** représentant l’état du joueur.
* `Attaquer()` et `SubirDegats()` sont des **méthodes** décrivant ses comportements.

Chaque instance de `Joueur` aura ses propres valeurs et réagira indépendamment des autres.

---

## Lien avec Unity

Dans Unity, les **attributs** d’une classe dérivée de `MonoBehaviour` apparaissent dans l’**Inspecteur** lorsqu’ils sont publics ou marqués `[SerializeField]`.
Ils permettent de définir les propriétés d’un GameObject (par exemple, sa vitesse, sa vie ou son type d’arme).

Les **méthodes** sont quant à elles utilisées pour définir le comportement du GameObject, comme :

* `Start()` → appelée au démarrage,
* `Update()` → exécutée à chaque frame,
* ou des méthodes personnalisées (`Attaquer()`, `SeDeplacer()`, etc.).

Ainsi, chaque composant Unity est une classe possédant des **attributs (données)** et des **méthodes (actions)**.

---

## Références utiles

* [Microsoft Learn — Membres et méthodes en C#](https://learn.microsoft.com/fr-fr/dotnet/csharp/programming-guide/classes-and-structs/methods)
* [Microsoft Learn — Modificateurs d’accès (C#)](https://learn.microsoft.com/fr-fr/dotnet/csharp/programming-guide/classes-and-structs/access-modifiers)
* [Unity Learn — Variables and Functions](https://learn.unity.com/tutorial/variables-and-functions)
* Albahari, J. & Albahari, B. *C# 12 in a Nutshell*, O’Reilly Media, 2024.
